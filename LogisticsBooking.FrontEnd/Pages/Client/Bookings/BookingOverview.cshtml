@page
@using LogisticsBooking.FrontEnd.DataServices.Models
@model LogisticsBooking.FrontEnd.Pages.Client.Bookings.BookingOverviewModel

@{
    ViewData["Title"] = "Home page";
}

<style>
    .td {
        white-space: nowrap;
        overflow: hidden;
    }
    .th {
        white-space: nowrap;
        overflow: hidden;
    }
    .div{
        white-space: nowrap;
        overflow: hidden;
    }
</style>

<body onload="toggle('orderItem')">
<br/>
<div>
    <button onclick="toggle('orderItem')" class="btn btn-primary">Gem/Vis Alle</button>
</div>
<hr/>
<table id="example" class="display" style="width: 100%">
    <thead>
    <tr>
        <th> </th>
        <th>Dato</th>
        <th>ID</th>
        <th>Paller</th>
        <th>Navn</th>
        <th>Kontakt</th>
        <th>Port</th>
        <th>Faktisk<br/>Ankomst</th>
        <th>Start<br/>Læsning</th>
        <th>Slut<br/>Læsning</th>
        <th> </th>
    </tr>
    </thead>
    <tbody>
    @foreach (var booking in @Model.Bookings)
    {
        <tr>
            <td>
                <button class="no-sort" onclick="toggle('@booking.internalId')"><i class="fas fa-angle-down"></i></button>
                <div class="orderItem @booking.internalId">
                    <div style="font-weight: bold; opacity: 0;">O</div>
                    @foreach (var order in @booking.Orders)
                    {
                        <div style="opacity: 0">O</div>
                    }
                </div>
            </td>
            <td>
                @Html.
                <div class="orderItem @booking.internalId">
                    <div style="font-weight: bold">KUNNR</div>
                    @foreach (var order in @booking.Orders)
                    {
                        <div>@order.customerNumber</div>
                    }
                </div>
            </td>
            <td>
                @booking.ExternalId
                <div class="orderItem @booking.internalId">
                    <div style="font-weight: bold">ORDNR</div>
                    @foreach (var order in @booking.Orders)
                    {
                        <div>@order.orderNumber</div>
                    }
                </div>
            </td>
            <td>
                @booking.totalPallets
                <div class="orderItem @booking.internalId">
                    <div style="font-weight: bold">Varenumre</div>
                    @foreach (var order in @booking.Orders)
                    {
                        <div>@order.wareNumber</div>
                    }
                </div>
            </td>
            <td>
                <div style="white-space: nowrap; overflow: hidden">@booking.transporterName</div>
                <div class="orderItem @booking.internalId">
                    <div style="font-weight: bold">Ind/Ud</div>
                    @foreach (var order in @booking.Orders)
                    {
                        <div>@order.InOut</div>
                    }
                </div>
            </td>
            <td>
                @booking.email
                <div class="orderItem @booking.internalId">
                    <div style="font-weight: bold; opacity: 0">Ind/Ud</div>
                    @foreach (var order in @booking.Orders)
                    {
                        <div style="opacity: 0">@order.InOut</div>
                    }
                </div>
            </td>
            <td>
                @booking.port
                <div class="orderItem @booking.internalId">
                    <div style="font-weight: bold; opacity: 0">Ind/Ud</div>
                    @foreach (var order in @booking.Orders)
                    {
                        <div style="opacity: 0">@order.InOut</div>
                    }
                </div>
            </td>
            <form method="post">
                <td>
                    <input type="time" asp-for="@booking.actualArrival" name="actualArrival"/>
                    <div class="orderItem @booking.internalId">
                        <div style="font-weight: bold; opacity: 0">Ind/Ud</div>
                        @foreach (var order in @booking.Orders)
                        {
                            <div style="opacity: 0">@order.InOut</div>
                        }
                    </div>
                </td>
                <td>
                    <div>
                        <input type="time" asp-for="@booking.startLoading" name="startLoading"/>
                    </div>
                    <div class="orderItem @booking.internalId">
                        <div style="font-weight: bold; opacity: 0">Ind/Ud</div>
                        @foreach (var order in @booking.Orders)
                        {
                            <div style="opacity: 0">@order.InOut</div>
                        }
                    </div>
                </td>
                <td>
                    <input type="time" asp-for="@booking.endLoading" name="endLoading"/>
                    <div class="orderItem @booking.internalId">
                        <div style="font-weight: bold; opacity: 0">Ind/Ud</div>
                        @foreach (var order in @booking.Orders)
                        {
                            <div style="opacity: 0">@order.InOut</div>
                        }
                    </div>
                </td>
                <td>
                    <button asp-page-handler="Update" asp-route-id="@booking.internalId"> <i class="far fa-edit"></i> </button>

                    <div class="orderItem @booking.internalId">
                        <div style="font-weight: bold; opacity: 0;">O</div>
                        @foreach (var order in @booking.Orders)
                        {
                            <div style="opacity: 0">@order.InOut</div>
                        }
                    </div>
                </td>
            </form>
        </tr>
    }
    </tbody>
</table>
</body>


@section Scripts{
    <link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">



    <script>
        $(function () {
            $("#example").DataTable({
                "order": [[1, "desc"]], 
                "columnDefs": [
                    { "orderable": false, "targets": [ 0, 2, 3, 6, 7, 8, 9, 10 ] }
                ]
            });
        });

    </script>
    
    <script>
        function toggle(className) {
            var x = '.' + className;
            if ($(x).is(":hidden")) {
                show(className)
            } else {
                hide(className)
            }
        }
    </script>
    
    <script>
        function hide(className) {
            var x = '.' + className;
            $(x).hide();
        }
    </script>

    <script>
        function show(className) {
            var x = '.' + className;
            $(x).show();
        }
    </script>
}